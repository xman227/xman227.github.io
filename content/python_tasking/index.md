---
emoji: ğŸ‘©â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦
title: íŒŒì´ì¬ í•¨ìˆ˜ ë³‘ë ¬ ì²˜ë¦¬
date: '2022-02-23 23:00:00'
author: í•˜ì„±ë¯¼
tags: blog gatsby theme ê°œì¸ ë¹„ í…Œë§ˆ
categories: Python
---


# ë¹…ë°ì´í„° í•¸ë“¤ë§ì˜ í•„ìˆ˜, ë³‘ë ¬ ì»´í“¨íŒ…

## ë™ì‹œì„±ê³¼ ë³‘ë ¬ì„±

ë™ì‹œì„± : Concurrency

ë³‘ë ¬ì„± : Parallelism

ë©€í‹° íƒœìŠ¤í‚¹ì—ëŠ” ìœ„ì˜ 2ê°€ì§€ ë°©ì‹ìˆë‹¤.

ë™ì‹œì„± : í•˜ë‚˜ì˜ processor ê°€ ë‚¨ëŠ” ì‹œê°„ë™ì•ˆ ë‹¤ë¥¸ task ë¥¼ ë™ì‹œì— ìˆ˜í–‰

ë‹¤ì‹œë§í•´, íŠ¹ì • ìˆœê°„ì—ëŠ” 1ê°€ì§€ task ë¥¼ í•˜ê² ì§€ë§Œ, ë‹¤ìŒ task ë¡œ ë„˜ì–´ê°€ëŠ”ë° ì‹œê°„ì´ ê±¸ë¦¬ê²Œ ë˜ë©´ ë‹¤ë¥¸ task ë¥¼ ìˆ˜í–‰í•˜ë„ë¡ í•œë‹¤.

ë³‘ë ¬ì„± : ì—¬ëŸ¬ processor ê°€ ê°ì task ë¥¼ ë™ì‹œì— ìˆ˜í–‰

> ë‹¤ì‹œ ë§í•´, ë³‘ë ¬ì„±ì„ ê°€ì§„ processor ê°€ ë™ì‹œì„±ì„ ê°€ì§€ê³  ì¼í•  ìˆ˜ ìˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ë¼ë©´ì„ ì¡°ë¦¬í•˜ë ¤ë©´ ë¬¼ì„ ë“ì—¬ì•¼ í•˜ëŠ”ë°.  
processor ëŠ” ë¶ˆì„ ì¼œê³  ë¬¼ì´ ë“ê¸°ë¥¼ ê¸°ë‹¤ë ¤ì•¼ í•œë‹¤.

ì´ì²˜ëŸ¼ ëŒ€ê¸°í•´ì•¼ í•˜ëŠ” ìƒí™©ì„ 'bound' ìƒíƒœ ë¼ê³  í•œë‹¤. 

bound ìƒíƒœì— ê·¸ì € ëŒ€ê¸°ë§Œ í•˜ê³  ìˆëŠ” ë°©ì‹ì„ Syncronzized, ë™ê¸° ë°©ì‹ì´ë¼ê³  í•œë‹¤.  
bound ìƒíƒœì— ë‹¤ë¥¸ ì¼ì„ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì„ Asynchronous ë¹„ë™ê¸° ë°©ì‹ì´ë¼ê³  í•œë‹¤.

---

## process, thread , profiling

### Process

í•˜ë‚˜ì˜ í”„ë¡œê·¸ë¨ì„ ìƒì„±í•  ë•Œ, ìš´ì˜ì²´ì œëŠ” í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ ë¥¼ ìƒì„±í•œë‹¤.

í”„ë¡œì„¸ìŠ¤ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ë™ì‹œí‚¤ë©´ì„œ ì¼ì–´ë‚˜ëŠ” ë©”ëª¨ë¦¬ìƒì˜ ì‘ì—… ë‹¨ìœ„ë¥¼ ì˜ë¯¸í•œë‹¤.

í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ëŠ” CPU , ë©”ëª¨ë¦¬(Ram), ë””ìŠ¤í¬ ë° ìë£Œêµ¬ì¡°ë¥¼ ì´ìš©í•˜ëŠ”ë°,
ê·¸ ê³¼ì •ì—ì„œ ë©”ëª¨ë¦¬ëŠ” ì—¬ëŸ¬ ë²ˆ ì“°ì´ê²Œ ëœë‹¤.

### Thread

thread ëŠ” process ë‚´ë¶€ì— ìˆëŠ” ë˜ ê°ê°ì˜ ì‘ì—…ë‹¨ìœ„ë¥¼ ì˜ë¯¸í•œë‹¤

í—¬ìŠ¤ë¥¼ í•˜ëŠ” `program` ì—ì„œ, ìš´ë™ì„ ìˆ˜ë¼ëŠ” `processor` ëŠ” ìŠ¤ì¿¼íŠ¸, ë ˆê·¸í”„ë ˆìŠ¤, ë ˆê·¸ ì»¬ ë“±ì˜ `thread` ë¥¼ ìˆ˜í–‰í•œë‹¤.

í—¬ìŠ¤ë¡œ ê³„ì† ë¹„ìœ ë¥¼ ë“¤ì–´ ë³´ê² ë‹¤.

ìš´ë™ì„ ìˆ˜ë“¤ë¼ë¦¬ í—¬ìŠ¤ì¥ ìì²´ë¥¼ ê³µìœ í•  ìˆ˜ëŠ” ìˆì§€ë§Œ, í•˜ë‚˜ì˜ ë ‰ ì„ ê³µìœ í•  ìˆ˜ëŠ” ì—†ë‹¤.

> ë‹¤ì‹œë§í•´, `thraed` ë§ˆë‹¤ ì „ìš© ë©”ëª¨ë¦¬ ê³µê°„ `head` ì„ ê°€ì§„ë‹¤.


### profiling

ì‚¬ê±´ìˆ˜ì‚¬ í”„ë¡œíŒŒì¼ë§. ë“¤ì–´ë³¸ì  ìˆì„ ê²ƒì´ë‹¤.  
ê·¸ ì‚¬ê±´ì˜ ì¼ê±°ìˆ˜ ì¼íˆ¬ì¡±ì„ ë“¤ì—¬ë‹¤ë³´ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.

ì»´í“¨í„° ë‚´ë¶€ì˜ í”„ë¡œíŒŒì¼ë§ë„ ë˜‘ê°™ë‹¤.
  
í”„ë¡œê·¸ë¨ ì½”ë“œ ë‚´ë¶€ì—ì„œ 
1. ì–´ëŠ ë¶€ë¶„ì´ ëŠë¦°ì§€
2. ì–´ë””ì„œ RAMì„ ë§ì´ ì‚¬ìš©í•˜ëŠ”ì§€

í™•ì¸í•  ìˆ˜ ìˆë‹¤.

íŒŒì´ì¬ì—ì„œë„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.



```python
import timeit # í”„ë¡œíŒŒì¼ë§ ë¼ì´ë¸ŒëŸ¬ë¦¬
        
def f1():
    s = set(range(100))

    
def f2():
    l = list(range(100))

    
def f3():
    t = tuple(range(100))


def f4():
    s = str(range(100))

    
def f5():
    s = set()
    for i in range(100):
        s.add(i)

def f6():
    l = []
    for i in range(100):
        l.append(i)
    
def f7():
    s_comp = {i for i in range(100)}

    
def f8():
    l_comp = [i for i in range(100)]
    

t1 = timeit.Timer("f1()", "from __main__ import f1")
t2 = timeit.Timer("f2()", "from __main__ import f2")
t3 = timeit.Timer("f3()", "from __main__ import f3")
t4 = timeit.Timer("f4()", "from __main__ import f4")
t5 = timeit.Timer("f5()", "from __main__ import f5")
t6 = timeit.Timer("f6()", "from __main__ import f6")
t7 = timeit.Timer("f7()", "from __main__ import f7")
t8 = timeit.Timer("f8()", "from __main__ import f8")

print("set               :", t1.timeit())
print("list              :", t2.timeit())
print("tuple             :", t3.timeit())
print("string            :", t4.timeit())
print("set_add           :", t5.timeit())
print("list_append       :", t6.timeit())
print("set_comprehension :", t5.timeit())
print("list_comprehension:", t6.timeit())
```

    set               : 1.690346003999366
    list              : 0.7587415179996242
    tuple             : 0.7320455680001032
    string            : 0.4020238100001734
    set_add           : 5.726110922999396
    list_append       : 5.244985264999741
    set_comprehension : 5.7903866610004116
    list_comprehension: 5.160655052999573


0ë¶€í„° 100ê¹Œì§€ì˜ ìˆ˜ë¥¼ ê° ìë£Œêµ¬ì¡°ì— ë‹´ëŠ” ì‹œê°„ì„ ì„¸ì–´ ë³´ì•˜ë‹¤.

ì´ë ‡ê²Œ í•¨ìˆ˜ì˜ ì„±ëŠ¥ì„ ì¸¡ì •í•  ìˆ˜ ìˆë‹¤.
ë‹¤ë§Œ ì´ê±´ í”„ë¡œíŒŒì¼ë§ì„ ìµœ ë‹¨ìˆœí™” í•œ ê²ƒì´ë‹¤.

ì›ë˜ëŠ” ì½”ë“œë³„ ë“¤ì–´ê°€ëŠ” Ram ì˜ í¬ê¸°ë‚˜ ì„±ëŠ¥ê¹Œì§€ ì¸¡ì •í•œë‹¤.

## Multi-tasking

ë‹¨ìˆœíˆ ë§í•´ ìš°ë¦¬ëŠ” ë³‘ë ¬í™”, ë˜ëŠ” ë™ì‹œí™” í•˜ê¸° ìœ„í•´ì„œ ìì›ì„ up í•  ìˆ˜ë„ ìˆê³ ,  
ìì›ì„ out (í™•ì¥) í•  ìˆ˜ë„ ìˆë‹¤.

Scale up - í•œ ëŒ€ì˜ ì»´í“¨í„° ì„±ëŠ¥ í–¥ìƒ
Scale out - í•œ ëŒ€ì—ì„œ ì—¬ëŸ¬ëŒ€ë¡œ ì»´í“¨í„° ê°œìˆ˜ë¥¼ ëŠ˜ë ¤ í•œëŒ€ì²˜ëŸ¼ ì‚¬ìš©

## ì‹¤ìŠµ




### thread


```python
from threading import *
from time import sleep

Stopped = False

def worker(work, sleep_sec): 
    
    while not Stopped:          
        print('do ', work)      
        sleep(sleep_sec) 
        
    print('retired..')         
        
        
t = Thread(target=worker, args=('work', 2))    
t.start()    
```

    do  work
    do  work
    do  work


ì›ë˜ëŠ” í•˜ë‚˜ì˜ ì½”ë“œê°€ ìˆìœ¼ë©´ ì‘ë™ì¤‘ì— ë‹¤ë¥¸ ê²ƒì— ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤.  
ë‹¤ë§Œ í˜„ì¬ `Thread` ë©”ì„œë“œë¥¼ í†µí•´ í•¨ìˆ˜ë¥¼ ì‹œì‘í–ˆë‹¤.

`Thread` ì—ì„œ worker ë©”ì„œë“œë¥¼ ì‹œì‘ì‹œì¼°ê³ , í•¨ìˆ˜ì˜ ì¸ìëŠ” work, 2 ê°€ ë“¤ì–´ê°”ë‹¤.

ì´ ì‘ì—…ì´ ëë‚˜ë ¤ë©´ `Stopped = True` ê°€ ë˜ì–´ì•¼ í•œë‹¤. 


```python
Stopped = True    

t.join()          
print('finish')
```

    retired..
    finish


ì´ì™€ ê°™ì´ `join` ë©”ì„œë“œë¥¼ í†µí•´ ê°™ì€ `thread` ì—ì„œ ì‘ì—…ì„ ì§„í–‰ì‹œì¼°ê³ 
ìƒë‹¨ì˜ ë¬´í•œë£¨í”„ë¥¼ ì¤‘ë‹¨ ì‹œí‚¬ ìˆ˜ê°€ ìˆë‹¤.

### multi - process


```python
import multiprocessing as mp

p = mp.Process(target='ë“¤ì–´ê°ˆ í”„ë¡œê·¸ë¨/í•¨ìˆ˜', args=('í•¨ìˆ˜ì˜ ì¸ì'))

p.start() # í”„ë¡œì„¸ìŠ¤ ì‹œì‘
p.join() # ì‹¤ì œ ì¢…ë£Œê¹Œì§€ ê¸°ë‹¤ë¦¼ (í•„ìš”ì‹œì—ë§Œ ì‚¬ìš©)
p.terminate() # í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
```


```python

def fitness():
    print('exercising...')

p = mp.Process(target=fitness, args=())
p.start()
```

    delivering...


ë©€í‹° í”„ë¡œì„¸ìŠ¤ë„ `thread` ì™€ ë™ì¼í•˜ê²Œ êµ¬í˜„ê°€ëŠ¥í•˜ë‹¤

---
## ì‹¤ì œ ì½”ë”© ì‹œ ì ìš©ë°©ë²•

ê²°êµ­ ìš°ë¦¬ê°€ ì´ëŸ° ê±¸ í•˜ëŠ” ì´ìœ ëŠ” ë” íš¨ìœ¨ì ì´ê³  ë¹ ë¥¸ í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

ê·¸ëŸ°ë° ëª¨ë“  í•¨ìˆ˜ë§ˆë‹¤ ì´ë ‡ê²Œ ë³‘ë ¬ì²˜ë¦¬ë¥¼ í•´ì£¼ëŠ” ê²Œ ë” ê·€ì°®ê³  ì‹œê°„ì´ ë§ì´ë“ ë‹¤.

ë•Œë¬¸ì— íŒŒì´ì¬ì—ì„œëŠ” ì´ ë³‘ë ¬ì²˜ë¦¬ ë° multi-tasking ì„ ìë™ìœ¼ë¡œ í•´ì£¼ëŠ” ëª¨ë“ˆì´ ìˆë‹¤.

`concurrent.futures` ì´ê²ƒì´ë‹¤.

[ê³µì‹ë¬¸ì„œ](https://docs.python.org/ko/3.7/library/concurrent.futures.html)

ë§Œì•½ ë³‘ë ¬ë¡œ ì²˜ë¦¬í•˜ê³  ì‹¶ì€ ì½”ë“œê°€ ìˆë‹¤ë©´ ì•„ë˜ì™€ ê°™ì€ ì½”ë“œì—

ë³‘ë ¬ì„ ì›í•˜ëŠ” í•¨ìˆ˜ë¥¼ `func` ì— ë„£ì–´ ì‚¬ìš©í•˜ë©´ ëœë‹¤.


```python
import concurrent

def main():
    with concurrent.futures.ProcessPoolExecutor() as executor:
        
        for output in executor.map( func , data ): # data ë¥¼ func ë¡œ ì²˜ë¦¬.
            print('%d is prime: %s' % (output)) #ëª¨ë“  sequence ë°ì´í„°ê°€ ë™ì‹œì²˜ë¦¬ë¨

```

```toc

```


```python

```
